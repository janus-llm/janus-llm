XT4 = "lambda: True"
X = "PSSNTEG ;ISC/XTSUMBLD KERNEL - Package checksum checker ;2970930.145828\n ;;1.0;PHARMACY DATA MANAGEMENT;;9/30/97\n ;;7.3;2970930.145828\n S XT4=\"I 1\",X=$T(+3) W !!,\"Checksum routine created on \",$P(X,\";\",4),\" by KERNEL V\",$P(X,\";\",3),!\nCONT F XT1=1:1 S XT2=$T(ROU+XT1) Q:XT2=\"\"  S X=$P(XT2,\" \",1),XT3=$P(XT2,\";\",3) X XT4 I $T W !,X X ^%ZOSF(\"TEST\") S:'$T XT3=0 X:XT3 ^%ZOSF(\"RSUM\") W ?10,$S('XT3:\"Routine not in UCI\",XT3!=Y:\"Calculated \",$C(7),Y,\", off by \",Y-XT3,1:\"ok\")\n\n K %1,%2,%3,X,Y,XT1,XT2,XT3,XT4 Q\nONE S XT4=\"I $D(^UTILITY($J,X))\",X=$T(+3) W !!,\"Checksum routine created on \",$P(X,\";\",4),\" by KERNEL V\",$P(X,\";\",3),!\n W !,\"Check a subset of routines:\" K ^UTILITY($J) X ^%ZOSF(\"RSEL\")\n W ! G CONT\nROU ;;\nPSSADDIT ;;30685202\nPSSAUTL ;;2539995\nPSSCHENV ;;1140827\nPSSCHPRE ;;1626421\nPSSCHPST ;;3751390\nPSSCLDRG ;;7333743\nPSSCREAT ;;24972545\nPSSD1 ;;10676\nPSSDDUT ;;14994173\nPSSDDUT2 ;;10950246\nPSSDDUT3 ;;12058890\nPSSDEE ;;43704990\nPSSDEE1 ;;26240841\nPSSDEE2 ;;5494501\nPSSDELOI ;;3460320\nPSSDENT ;;1634109\nPSSENV ;;203759\nPSSENVN ;;1146911\nPSSFIL ;;18709905\nPSSFILED ;;16572342\nPSSGEN ;;462676\nPSSGENM ;;434339\nPSSGFILD ;;15862350\nPSSGIU ;;9608320\nPSSGMI ;;4459902\nPSSGS0 ;;8551998\nPSSGSH ;;5680648\nPSSHELP ;;3001299\nPSSHL1 ;;10469844\nPSSHLSCH ;;1141341\nPSSHLU ;;3879886\nPSSITES1 ;;5263233\nPSSITEST ;;5269974\nPSSIVDRG ;;15593758\nPSSJEEU ;;5145075\nPSSJORDF ;;4873243\nPSSJSPU ;;10488182\nPSSJSPU0 ;;2605125\nPSSJSV ;;13264221\nPSSJSV0 ;;18084796\nPSSJXR ;;6435098\nPSSJXR1 ;;283291\nPSSJXR10 ;;2104500\nPSSJXR11 ;;690370\nPSSJXR12 ;;927686\nPSSJXR13 ;;2010380\nPSSJXR14 ;;358482\nPSSJXR15 ;;283700\nPSSJXR16 ;;11238641\nPSSJXR17 ;;9426208\nPSSJXR18 ;;737442\nPSSJXR19 ;;2124963\nPSSJXR2 ;;1688794\nPSSJXR20 ;;5762877\nPSSJXR21 ;;1426401\nPSSJXR22 ;;683202\nPSSJXR3 ;;363618\nPSSJXR4 ;;288930\nPSSJXR5 ;;11117778\nPSSJXR6 ;;9332083\nPSSJXR7 ;;743494\nPSSJXR8 ;;3365639\nPSSJXR9 ;;3366364\nPSSLAB ;;14173358\nPSSLOOK ;;19462443\nPSSMARK ;;26334152\nPSSMATCH ;;21769167\nPSSOICT ;;7252188\nPSSOICT1 ;;8390406\nPSSPOI ;;15938224\nPSSPOIC ;;19806247\nPSSPOIDT ;;33282191\nPSSPOIKA ;;21393690\nPSSPOIM ;;12995320\nPSSPOIM1 ;;35563255\nPSSPOIM2 ;;28347728\nPSSPOIM3 ;;9862483\nPSSPOIMN ;;27314811\nPSSPOIMO ;;28153203\nPSSPOST ;;5393689\nPSSPRE ;;3908870\nPSSPRETR ;;460682\nPSSQOC ;;4706994\nPSSREF ;;4469291\nPSSSOLI1 ;;12192527\nPSSSOLIT ;;14008478\nPSSSPD ;;6082698\nPSSSUTIL ;;7176881\nPSSSYN ;;2968065\nPSSVIDRG ;;16214050\nPSSVX6 ;;4793258\nPSSVX61 ;;1695682\nPSSVX62 ;;401947\nPSSVX63 ;;387628\nPSSVX64 ;;1499523\nPSSVX65 ;;401610\nPSSVX66 ;;387249\nPSSYSP ;;62952\n"
print("\nChecksum routine created on ", X.split(";")[3], " by KERNEL V", X.split(";")[2])

def CONT():
    global XT1, XT2, XT3, XT4
    XT1 = 1
    while True:
        XT2 = ROU[XT1-1]
        if XT2 == "":
            break
        X = XT2.split(" ")[0]
        XT3 = XT2.split(";")[2]
        if eval(XT4)():
            print(X)
            if eval("^%ZOSF(\"TEST\")"):
                if not eval(XT3):
                    XT3 = 0
                if XT3 != eval("^%ZOSF(\"RSUM\")"):
                    print("?10, \"Calculated \", chr(7), ^%ZOSF(\"RSUM\"), \", off by \", ^%ZOSF(\"RSUM\")-XT3")
                else:
                    print("?10, \"ok\"")
            else:
                print("?10, \"Routine not in UCI\"")
        XT1 += 1

def ONE():
    global XT4
    XT4 = "lambda: bool(^UTILITY($J,X))"
    print("\nChecksum routine created on ", X.split(";")[3], " by KERNEL V", X.split(";")[2])
    print("\nCheck a subset of routines:")
    ^%ZOSF("RSEL")
    print()
    CONT()

ROU = [
    "PSSADDIT ;;30685202",
    "PSSAUTL ;;2539995",
    "PSSCHENV ;;1140827",
    "PSSCHPRE ;;1626421",
    "PSSCHPST ;;3751390",
    "PSSCLDRG ;;7333743",
    "PSSCREAT ;;24972545",
    "PSSD1 ;;10676",
    "PSSDDUT ;;14994173",
    "PSSDDUT2 ;;10950246",
    "PSSDDUT3 ;;12058890",
    "PSSDEE ;;43704990",
    "PSSDEE1 ;;26240841",
    "PSSDEE2 ;;5494501",
    "PSSDELOI ;;3460320",
    "PSSDENT ;;1634109",
    "PSSENV ;;203759",
    "PSSENVN ;;1146911",
    "PSSFIL ;;18709905",
    "PSSFILED ;;16572342",
    "PSSGEN ;;462676",
    "PSSGENM ;;434339",
    "PSSGFILD ;;15862350",
    "PSSGIU ;;9608320",
    "PSSGMI ;;4459902",
    "PSSGS0 ;;8551998",
    "PSSGSH ;;5680648",
    "PSSHELP ;;3001299",
    "PSSHL1 ;;10469844",
    "PSSHLSCH ;;1141341",
    "PSSHLU ;;3879886",
    "PSSITES1 ;;5263233",
    "PSSITEST ;;5269974",
    "PSSIVDRG ;;15593758",
    "PSSJEEU ;;5145075",
    "PSSJORDF ;;4873243",
    "PSSJSPU ;;10488182",
    "PSSJSPU0 ;;2605125",
    "PSSJSV ;;13264221",
    "PSSJSV0 ;;18084796",
    "PSSJXR ;;6435098",
    "PSSJXR1 ;;283291",
    "PSSJXR10 ;;2104500",
    "PSSJXR11 ;;690370",
    "PSSJXR12 ;;927686",
    "PSSJXR13 ;;2010380",
    "PSSJXR14 ;;358482",
    "PSSJXR15 ;;283700",
    "PSSJXR16 ;;11238641",
    "PSSJXR17 ;;9426208",
    "PSSJXR18 ;;737442",
    "PSSJXR19 ;;2124963",
    "PSSJXR2 ;;1688794",
    "PSSJXR20 ;;5762877",
    "PSSJXR21 ;;1426401",
    "PSSJXR22 ;;683202",
    "PSSJXR3 ;;363618",
    "PSSJXR4 ;;288930",
    "PSSJXR5 ;;11117778",
    "PSSJXR6 ;;9332083",
    "PSSJXR7 ;;743494",
    "PSSJXR8 ;;3365639",
    "PSSJXR9 ;;3366364",
    "PSSLAB ;;14173358",
    "PSSLOOK ;;19462443",
    "PSSMARK ;;26334152",
    "PSSMATCH ;;21769167",
    "PSSOICT ;;7252188",
    "PSSOICT1 ;;8390406",
    "PSSPOI ;;15938224",
    "PSSPOIC ;;19806247",
    "PSSPOIDT ;;33282191",
    "PSSPOIKA ;;21393690",
    "PSSPOIM ;;12995320",
    "PSSPOIM1 ;;35563255",
    "PSSPOIM2 ;;28347728",
    "PSSPOIM3 ;;9862483",
    "PSSPOIMN ;;27314811",
    "PSSPOIMO ;;28153203",
    "PSSPOST ;;5393689",
    "PSSPRE ;;3908870",
    "PSSPRETR ;;460682",
    "PSSQOC ;;4706994",
    "PSSREF ;;4469291",
    "PSSSOLI1 ;;12192527",
    "PSSSOLIT ;;14008478",
    "PSSSPD ;;6082698",
    "PSSSUTIL ;;7176881",
    "PSSSYN ;;2968065",
    "PSSVIDRG ;;16214050",
    "PSSVX6 ;;4793258",
    "PSSVX61 ;;1695682",
    "PSSVX62 ;;401947",
    "PSSVX63 ;;387628",
    "PSSVX64 ;;1499523",
    "PSSVX65 ;;401610",
    "PSSVX66 ;;387249",
    "PSSYSP ;;62952",
]

print()
CONT()