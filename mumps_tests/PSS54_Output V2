Requirements:

1. The python code should include a function named ALL that takes three parameters: PSSIEN, PSSFT, and LIST. The function is responsible for retrieving information from file 54 (RX CONSULT) based on the provided parameters.

2. The PSSIEN parameter is the IEN (Internal Entry Number) of the entry in the RX CONSULT file (#54) that needs to be retrieved. It should be an integer value.

3. The PSSFT parameter is a free text name in the RX CONSULT file (#54) that can be used as an alternative to PSSIEN for searching. If PSSIEN is not provided, PSSFT should be used for searching. It should be a string.

4. The LIST parameter is the subscript of the ^TMP array where the retrieved data should be stored. The data should be stored in the form ^TMP($J,LIST,Field Number), where Field Number is the field number of the data piece being returned. It should be a string.

5. The function should return the NAME field (#.01) and TEXT field (#1) of the RX CONSULT file (#54) for the specified entry. The returned data should be stored in the ^TMP array as follows: ^TMP($J,LIST,.01)=NAME field value and ^TMP($J,LIST,1)=TEXT field value.

6. If the PSSIEN parameter is not provided and the PSSFT parameter is also empty, the function should set ^TMP($J,LIST,0) to -1^"NO DATA FOUND" and return.

7. If the PSSIEN parameter is provided, the function should first check if it is a valid IEN in the RX CONSULT file (#54). If it is not valid, the function should set ^TMP($J,LIST,0) to -1^"NO DATA FOUND" and return.

8. If the PSSIEN parameter is valid, the function should retrieve the NAME field (#.01) and TEXT field (#1) of the RX CONSULT file (#54) for the specified entry using the GETS^DIQ function. The retrieved data should be stored in the ^TMP array as mentioned in requirement 5.

9. If the PSSFT parameter is provided and the PSSIEN parameter is empty, the function should search the RX CONSULT file (#54) using the FIND^DIC function to find entries that match the PSSFT value. The function should store the found entries in the ^TMP array as mentioned in requirement 5.

10. If no matching entries are found using the FIND^DIC function, the function should set ^TMP($J,LIST,0) to -1^"NO DATA FOUND" and return.

11. The function should support case-insensitive searching when using the PSSFT parameter.

12. The function should set ^TMP($J,LIST,0) to the total number of matching entries found and return. The ^TMP array should contain the retrieved data for each entry in the format mentioned in requirement 5.

13. The python code should include a function named LOOKUP that takes two parameters: PSSSRCH and LIST. The function is responsible for searching entries in the RX CONSULT file (#54) based on the provided search criteria.

14. The PSSSRCH parameter is the IEN of the entry in the RX CONSULT file (#54) that needs to be searched. It should be an integer value.

15. The LIST parameter is the subscript of the ^TMP array where the search results should be stored. The search results should be stored in the form ^TMP($J,LIST,Field Number), where Field Number is the field number of the data piece being returned. It should be a string.

16. The function should search the RX CONSULT file (#54) using the FIND^DIC function to find entries that match the PSSSRCH value. The function should store the found entries in the ^TMP array as follows: ^TMP($J,LIST,.01)=NAME field value and ^TMP($J,LIST,"B",NAME field value,IEN)=.

17. If no matching entries are found using the FIND^DIC function, the function should set ^TMP($J,LIST,0) to -1^"NO DATA FOUND" and return.

18. The function should set ^TMP($J,LIST,0) to the total number of matching entries found and return. The ^TMP array should contain the search results for each entry in the format mentioned in requirement 16.

19. The python code should include the following auxiliary functions: SETZRO and SETTXT.

20. The SETZRO function is responsible for setting the ^TMP array with the retrieved data for the main entry (PSS(1)) in the RX CONSULT file (#54). It should set ^TMP($J,LIST,PSS(1),.01)=NAME field value and ^TMP($J,LIST,"B",NAME field value,PSS(1))=.

21. The SETTXT function is responsible for setting the ^TMP array with the retrieved data for the PSS(2) entry in the RX CONSULT file (#54.1). It should set ^TMP($J,LIST,PSSIEN,"TXT",PSS(2),.01)=TEXT field value.

22. The python code should handle error conditions appropriately and provide error messages in the ^TMP array when necessary.