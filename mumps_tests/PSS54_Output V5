Requirements:

1. The system shall provide an API for retrieving information from file 54 in the Pharmacy Data Management system.
2. The system shall accept the following inputs for the API:
   a. PSSIEN - The IEN of the entry in the RX CONSULT file (#54).
   b. PSSFT - The free text name in the RX CONSULT file (#54).
   c. LIST - The subscript of the ^TMP array in the form ^TMP($J,LIST,Field Number, where Field Number is the field number of the data piece being returned.
3. The system shall return the NAME field (#.01) and TEXT field (#1) of the RX CONSULT file (#54) based on the provided inputs.
4. If the LIST input is not provided, the system shall not perform any operations and return no data.
5. If both PSSIEN and PSSFT inputs are not provided, the system shall return an error indicating "NO DATA FOUND".
6. If PSSIEN is provided and its value is less than or equal to 0, the system shall return an error indicating "NO DATA FOUND".
7. If PSSIEN is provided and its value is greater than 0, the system shall perform the following operations:
   a. Find the entry in the RX CONSULT file (#54) with the provided PSSIEN using the FIND1^DIC function.
   b. If no entry is found, the system shall return an error indicating "NO DATA FOUND".
   c. If an entry is found, the system shall retrieve the NAME field (#.01) and TEXT field (#1) using the GETS^DIQ function.
   d. The system shall store the retrieved data in the ^TMP array with the provided LIST subscript.
   e. The system shall also store the number of retrieved entries in the ^TMP array with the provided LIST subscript.
   f. The system shall store the TEXT field values in the ^TMP array under the subscripts ^TMP($J,LIST,+PSSIEN,"TXT",0) and ^TMP($J,LIST,+PSSIEN,"TXT",+PSS(2),.01).
8. If PSSIEN is not provided and PSSFT is provided, the system shall perform the following operations:
   a. If PSSFT contains the value "??" (double question marks), the system shall perform a loop to retrieve all entries in the RX CONSULT file (#54).
   b. The system shall retrieve the entries in the RX CONSULT file (#54) that match the provided PSSFT using the FIND^DIC function.
   c. If no entries are found, the system shall return an error indicating "NO DATA FOUND".
   d. If entries are found, the system shall retrieve the NAME field (#.01) for each entry and store it in the ^TMP array with the provided LIST subscript.
   e. The system shall also store the retrieved entries in the ^TMP array with the subscripts ^TMP($J,LIST,+^TMP("DILIST",$J,PSSXX,0),.01) and ^TMP($J,LIST,"B",$P($G(^TMP("DILIST",$J,PSSXX,0)),U,2),+^TMP("DILIST",$J,PSSXX,0)).
9. The system shall provide a function named LOOKUP that accepts the following inputs:
   a. PSSSRCH - The IEN of the entry in the RX CONSULT file (#54).
   b. LIST - The subscript of the ^TMP array in the form ^TMP($J,LIST,Field Number, where Field Number is the field number of the data piece being returned.
10. The system shall return the NAME field (#.01) of the RX CONSULT file (#54) based on the provided PSSSRCH input.
11. If the LIST input is not provided, the system shall not perform any operations and return no data.
12. If the PSSSRCH input is not provided, the system shall return an error indicating "NO DATA FOUND".
13. The system shall retrieve the entries in the RX CONSULT file (#54) that match the provided PSSSRCH using the FIND^DIC function.
14. If no entries are found, the system shall return an error indicating "NO DATA FOUND".
15. If entries are found, the system shall retrieve the NAME field (#.01) for each entry and store it in the ^TMP array with the provided LIST subscript.
16. The system shall also store the retrieved entries in the ^TMP array with the subscripts ^TMP($J,LIST,+^TMP("DILIST",$J,PSSXX,0),.01) and ^TMP($J,LIST,"B",$P($G(^TMP("DILIST",$J,PSSXX,0)),U,2),+^TMP("DILIST",$J,PSSXX,0)).
17. The system shall provide a function named SETZRO that sets the NAME field value in the ^TMP array for a given entry in the RX CONSULT file (#54).
18. The system shall provide a function named SETTXT that sets the TEXT field value in the ^TMP array for a given entry in the RX CONSULT file (#54).
19. The system shall provide a function named LOOP that retrieves all entries in the RX CONSULT file (#54) and stores them in the ^TMP array.
20. The system shall store the number of retrieved entries in the ^TMP array with the provided LIST subscript.
21. The system shall return the number of retrieved entries or an error indicating "NO DATA FOUND" based on the number of retrieved entries in the RX CONSULT file (#54).